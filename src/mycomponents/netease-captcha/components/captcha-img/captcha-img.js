require("./../../runtime"),require("./../../common"),(my.neCaptchaJsonp=my.neCaptchaJsonp||[]).push([[4],{12:function(t,i,e){"use strict";var r=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},a=e(2),s=n(a),o=n(e(4));function n(t){return t&&t.__esModule?t:{default:t}}Component({mixins:[o.default],props:{mode:"scaleToFill",autoWidth:!1,urls:[],retry:!0,imgStyle:"",imageClass:"",onLoad:function(){},onError:function(){},onTryError:function(){}},data:{url:"",width:0,height:0,wrapHeight:0},onInit:function(){this.setData({url:this.props.urls.length?this.props.urls[0]:""})},didUpdate:function(t){var i=this.props.urls,e=t.urls;i&&e&&i.join("")===e.join("")||this.setData({url:i&&i.length?i[0]:""})},didMount:function(){var t=this;this.props.autoWidth&&(this.getHeight(),this.unsubscribeStore=this.store.subscribe((function(i,e){"UPDATE_VISIBLE"===i.type&&e.visible&&!t.data.wrapHeight&&t.getHeight()})))},didUnmount:function(){this.unsubscribeStore&&this.unsubscribeStore()},methods:{getHeight:function(){var t=this;my.createSelectorQuery().select(".query-img-"+this.data.uuid).boundingClientRect().exec((function(i){var e=i[0].height;t.props.autoWidth&&t.data.height&&t.setData({width:(e/t.data.height*t.data.width).toFixed(2)}),0!==e&&t.setData({wrapHeight:e})}))},handleLoaded:function(t){var i=t.detail.height,e=t.detail.width;this.props.autoWidth&&(this.data.wrapHeight&&(e=(this.data.wrapHeight/i*e).toFixed(2)),this.setData({width:e,height:i})),this.props.onLoad({height:i,width:e,url:this.data.url})},handleError:function(t){var i=this.props.urls,e=i.indexOf(this.data.url);this.props.retry&&e!==i.length-1||this.props.onError(r({},t.detail)),this.setData({url:i[e+1]});var o=new s.default(a.REQUEST_IMG_ERROR,t.detail.errMsg);o.data={url:i[e],type:"image",index:e},this.props.onTryError(o)}}})}},[[12,1,0]]]);